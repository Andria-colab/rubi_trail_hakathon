<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Rubi Trail</title>

  <link rel="stylesheet" href="./style.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Telegram Mini App SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    /* safety so map always has height */
    #map { width: 100%; height: 100%; }
  </style>
</head>

<body>
  <!-- LOADING -->
  <div class="loading" id="loading">
    <div class="spinner"></div>
    <div>Loading...</div>
  </div>

  <!-- HEADER -->
  <header>
    <div class="app-title">
      <img src="./Images/logo_PNG.png" class="app-logo" />
      Rubi Trail
    </div>

    <div class="coin-balance">
      <span id="coin-count">0</span>
      <div class="coin-icon"></div>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main>
    <!-- SCAN -->
    <section id="scan-view" class="view-section active">
      <video id="camera-stream" autoplay playsinline muted></video>
      <div class="scan-overlay">
        <div class="scan-text">Align the QR code inside the frame</div>
        <div class="scan-frame"></div>
      </div>
    </section>

    <!-- DISCOVER (âœ… now 3 cards) -->
    <section id="discover-view" class="view-section">
      <div class="card">
        <img
          src="https://cdn.georgia.to/img/thumbnails/4SPspoJhk72WETe3sSjND5_smedium.jpg"
          class="card-img"
          alt="Alphabetic Tower"
        />
        <div class="card-content">
          <div class="card-title">Alphabetic Tower</div>
          <div class="card-reward">REWARD: 10 <div class="coin-small"></div></div>
          <div class="card-location">Batumi Boulevard</div>
          <p class="card-desc">A modern symbol celebrating the Georgian alphabet and culture.</p>
        </div>
      </div>

      <div class="card">
        <img
          src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSnu5nA0CdvI7yiZIQv-DLOpP2gtfjQCZF-vQ&s"
          class="card-img"
          alt="Ali and Nino"
        />
        <div class="card-content">
          <div class="card-title">Ali and Nino</div>
          <div class="card-reward">REWARD: 10 <div class="coin-small"></div></div>
          <div class="card-location">Batumi Boulevard</div>
          <p class="card-desc">Iconic statue symbolizing eternal love.</p>
        </div>
      </div>

      <div class="card">
        <img
          src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTg1Jsw8MUbLboM9usq0ZrNebJ63j6Beze7vQ&s"
          class="card-img"
          alt="GITA TouristHack 2025"
        />
        <div class="card-content">
          <div class="card-title">GITA TouristHack 2025</div>
          <div class="card-reward">REWARD: 10 <div class="coin-small"></div></div>
          <div class="card-location">Batumi Tech Park</div>
          <p class="card-desc">Innovation hackathon where teams build real tourism solutions.</p>
        </div>
      </div>
    </section>

    <!-- REWARDS (loaded from backend) -->
    <section id="rewards-view" class="view-section">
      <div id="rewards-list"></div>
    </section>

    <!-- MAP -->
    <section id="map-view" class="view-section">
      <div id="map"></div>
    </section>
  </main>

  <!-- NAVIGATION -->
  <nav>
    <a href="#" class="nav-item active" data-view="scan-view">
      <span class="nav-icon">ğŸ“·</span> Scan
    </a>
    <a href="#" class="nav-item" data-view="discover-view">
      <span class="nav-icon">ğŸ”</span> Discover
    </a>
    <a href="#" class="nav-item" data-view="rewards-view">
      <span class="nav-icon">ğŸ†</span> Rewards
    </a>
    <a href="#" class="nav-item" data-view="map-view">
      <span class="nav-icon">ğŸ—ºï¸</span> Map
    </a>
  </nav>

  <!-- LIBS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>

  <!-- APP SCRIPT -->
  <script src="./script.js"></script>
</body>
</html>
